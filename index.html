<!doctype html>
<html lang="fa" dir="rtl"> 
 <head> 
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <title>Ù…Ø¯ÛŒØ±ÛŒØª ØªØºØ°ÛŒÙ‡ Ø¨ÛŒÙ…Ø§Ø±Ø§Ù† Ø¯ÛŒØ§Ù„ÛŒØ²ÛŒ</title> 
  <link href="https://cdn.jsdelivr.net/npm/vazir-font@28.0.0/dist/font-face.css" rel="stylesheet"> 
  <link href="https://cdn.jsdelivr.net/npm/shabnam-font@5.0.0/dist/font-face.css" rel="stylesheet"> 
  <script src="https://cdn.jsdelivr.net/npm/persian-date@1.1.0/dist/persian-date.min.js"></script> 
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"> 
  <link rel="manifest" href="/manifest.json"> <!-- Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ PWA -->
  <meta name="theme-color" content="#1a3c6d"> <!-- Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ PWA -->
  <style>
    body {
      font-family: 'Shabnam', 'Vazir', sans-serif;
      margin: 0;
      padding: 8px;
      background-color: #FFF8E7;
      direction: rtl;
      text-align: right;
      color: #000000;
      overflow-x: hidden;
    }

    .container {
      max-width: 100%;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
    }

    h1 {
      font-size: 1.8rem;
      text-align: center;
      margin: 15px 0;
      font-weight: 500;
    }

    .intro-page {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      background-color: #FFF8E7;
      padding: 20px;
      text-align: center;
    }

    .intro-page h1 {
      font-size: 2.8rem;
      color: #000000;
      margin-bottom: 15px;
      font-weight: bold;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }

    .intro-page p {
      font-size: 1.5rem;
      color: #000000;
      margin-bottom: 25px;
      max-width: 700px;
      line-height: 1.6;
      font-weight: 500;
    }

    .intro-tabs {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 10px;
      width: 100%;
      max-width: 1200px;
    }

    .tab-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      width: 100%;
      justify-content: center;
    }

    .intro-tab-button {
      color: white;
      padding: 18px 40px;
      border-radius: 15px;
      font-size: 1.2rem;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      box-shadow: 0 3px 4px rgba(0, 0, 0, 0.2);
      height: 90px;
      font-weight: bold;
      background-color: #1a3c6d;
      width: calc(50% - 5px);
      max-width: 200px;
    }

    .intro-tab-button.register { background-color: #0288d1; }
    .intro-tab-button.intakeHistory { background-color: #f57c00; }
    .intro-tab-button.foodList { background-color: #d81b60; }
    .intro-tab-button.videos { background-color: #7b1fa2; }
    .intro-tab-button.tutorial { background-color: #388e3c; }
    .intro-tab-button.settings { background-color: #455a64; }
    .intro-tab-button.contact { background-color: #d32f2f; }
    .intro-tab-button.about { background-color: #e64a19; }

    .intro-tab-button:hover {
      filter: brightness(1.15);
      transform: scale(1.05);
    }

    .content-area {
      display: none;
      flex-grow: 1;
      margin-top: 20px;
      padding-bottom: 15px;
    }

    .content-area.active {
      display: block;
    }

    .nav-buttons {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-bottom: 15px;
    }

    .nav-button {
      background-color: #7e57c2;
      color: white;
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      transition: background-color 0.3s;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .nav-button:hover {
      background-color: #9575cd;
    }

    .tab-content {
      display: none;
      background-color: white;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
      margin: 8px;
    }

    .tab-content.active {
      display: block;
    }

    h2, h3 {
      color: #000000;
      margin-bottom: 12px;
      font-size: 1.4rem;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    p {
      line-height: 1.6;
      color: #000000;
      font-size: 1.2rem;
      margin-bottom: 8px;
    }

    small {
      color: #666;
      font-size: 0.9rem;
      display: block;
      margin-top: 4px;
    }

    .table-wrapper {
      overflow-x: auto;
      overflow-y: auto;
      max-height: 400px;
      margin-top: 8px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background-color: white;
    }

    table, th, td {
      border: 1px solid #e0e0e0;
    }

    th, td {
      padding: 10px;
      text-align: center;
      font-size: 1rem;
    }

    th {
      background-color: #f5f5f5;
      font-weight: 500;
    }

    td {
      min-width: 100px;
    }

    tr:nth-child(even) {
      background-color: #fafafa;
    }

    button {
      padding: 10px 20px;
      margin: 6px 0;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1.1rem;
      width: 100%;
      max-width: 180px;
      transition: background-color 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .add-button, .edit-button, .contact-button {
      background-color: #66bb6a;
      color: white;
    }

    .add-button:hover, .edit-button:hover, .contact-button:hover {
      background-color: #81c784;
    }

    .delete-button, .delete-all-button, .delete-all-data-button {
      background-color: #ef5350;
      color: white;
    }

    .delete-button:hover, .delete-all-button:hover, .delete-all-data-button:hover {
      background-color: #f44336;
    }

    .save-button {
      background-color: #42a5f5;
      color: white;
    }

    .save-button:hover {
      background-color: #2196f3;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 12px;
      width: 100%;
      max-width: 350px;
      margin: 0 auto;
      background-color: #fafafa;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    input, select {
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 1.1rem;
      width: 100%;
      box-sizing: border-box;
    }

    input[type="number"] {
      -moz-appearance: textfield;
    }

    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    label {
      font-size: 1.1rem;
      color: #000000;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .scrollable {
      overflow-x: auto;
      white-space: nowrap;
      padding: 8px 0;
      background-color: #fafafa;
      border-radius: 8px;
    }

    .scrollable p {
      display: inline-block;
      margin-right: 15px;
      font-size: 1.1rem;
      color: #000000;
    }

    .charts-container {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
      margin: 15px 0;
    }

    .chart-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      max-width: 200px;
      height: 280px;
      background-color: white;
      border-radius: 10px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      padding: 12px;
      margin: 6px;
    }

    .chart-wrapper canvas {
      max-width: 100%;
      max-height: 180px;
    }

    .chart-wrapper span {
      font-size: 1.8rem;
      margin-top: 8px;
      color: #000000;
    }

    #warnings {
      margin: 15px 0;
    }

    .warning {
      background-color: #ffcccb;
      color: #d32f2f;
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 8px;
      text-align: center;
      font-size: 1.1rem;
    }

    .error-message {
      background-color: #ffcccb;
      color: #d32f2f;
      padding: 10px;
      border-radius: 8px;
      margin: 8px 0;
      text-align: center;
      font-size: 1.1rem;
    }

    .accordion-button {
      background-color: #f5f5f5;
      color: #000000;
      cursor: pointer;
      padding: 12px;
      width: 100%;
      text-align: right;
      border: none;
      outline: none;
      transition: background-color 0.3s;
      font-size: 1.2rem;
      border-radius: 8px;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .accordion-button:hover {
      background-color: #e0e0e0;
    }

    .accordion-content {
      padding: 0 12px;
      background-color: #fafafa;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease-out;
      border-radius: 8px;
    }

    .accordion-content.active {
      max-height: 400px;
      overflow-y: auto;
      padding: 12px;
    }

    .video-container {
      margin: 15px 0;
      background-color: white;
      padding: 12px;
      border-radius: 10px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      width: 100%;
      max-width: 640px;
      margin-left: auto;
      margin-right: auto;
    }

    .video-container iframe {
      width: 100%;
      aspect-ratio: 16 / 9;
      border-radius: 8px;
    }

    .food-image {
      width: 50px;
      height: 50px;
      object-fit: cover;
      border-radius: 5px;
    }

    .about-logo {
      max-width: 150px;
      height: auto;
      margin: 15px auto;
      display: block;
    }

    #about p {
      text-align: justify;
    }

    .search-container {
      position: relative;
      width: 100%;
      max-width: 350px;
    }

    .search-container input {
      padding-right: 40px;
    }

    .search-container i {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      color: #666;
    }

    #intakeHistory table {
      margin-bottom: 20px;
      width: 100%;
      max-width: 350px;
      margin-left: auto;
      margin-right: auto;
    }

    @media (max-width: 768px) {
      body {
        padding: 5px;
      }

      h1 {
        font-size: 1.6rem;
      }

      .intro-page h1 {
        font-size: 2.3rem;
      }

      .intro-page p {
        font-size: 1.3rem;
      }

      .intro-tab-button {
        font-size: 1rem;
        padding: 15px 30px;
        height: 80px;
        width: calc(50% - 5px);
        max-width: 175px;
      }

      table {
        font-size: 0.9rem;
      }

      th, td {
        padding: 8px;
        min-width: 80px;
      }

      button {
        padding: 8px 16px;
        font-size: 1rem;
        max-width: 160px;
      }

      input, select {
        font-size: 1rem;
        padding: 8px;
      }

      form {
        max-width: 320px;
        padding: 12px;
      }

      h2, h3 {
        font-size: 1.3rem;
      }

      p, label {
        font-size: 1rem;
      }

      .chart-wrapper {
        max-width: 180px;
        height: 260px;
      }

      .chart-wrapper canvas {
        max-height: 160px;
      }

      .chart-wrapper span {
        font-size: 1.6rem;
      }

      .scrollable p {
        font-size: 1rem;
      }

      .video-container {
        max-width: 100%;
      }

      .about-logo {
        max-width: 120px;
      }

      .table-wrapper {
        max-height: 300px;
      }

      .accordion-content.active {
        max-height: 300px;
      }
    }

    @media (max-width: 480px) {
      h1 {
        font-size: 1.4rem;
      }

      .intro-page h1 {
        font-size: 2rem;
      }

      .intro-page p {
        font-size: 1.2rem;
      }

      .intro-tab-button {
        font-size: 0.9rem;
        padding: 12px 20px;
        height: 70px;
        width: 100%;
        max-width: 150px;
      }

      table {
        font-size: 0.8rem;
      }

      th, td {
        padding: 6px;
        min-width: 60px;
      }

      button {
        padding: 6px 12px;
        font-size: 0.9rem;
        max-width: 140px;
      }

      input, select {
        font-size: 0.9rem;
        padding: 6px;
      }

      form {
        max-width: 280px;
        padding: 10px;
      }

      h2, h3 {
        font-size: 1.2rem;
      }

      p, label {
        font-size: 0.9rem;
      }

      .charts-container {
        flex-direction: column;
        align-items: center;
      }

      .chart-wrapper {
        max-width: 100%;
        height: 240px;
        margin: 8px 0;
      }

      .chart-wrapper canvas {
        max-height: 150px;
      }

      .chart-wrapper span {
        font-size: 1.4rem;
      }

      .scrollable p {
        font-size: 0.9rem;
      }

      .video-container {
        max-width: 100%;
      }

      .about-logo {
        max-width: 100px;
      }

      .table-wrapper {
        max-height: 200px;
      }

      .accordion-content.active {
        max-height: 200px;
      }
    }
  </style> 
 </head> 
 <body> 
  <div class="intro-page" id="introPage"> 
   <h1>Ù…Ø¯ÛŒØ±ÛŒØª ØªØºØ°ÛŒÙ‡ Ø¨ÛŒÙ…Ø§Ø±Ø§Ù† Ø¯ÛŒØ§Ù„ÛŒØ²ÛŒ</h1> 
   <p>Ø§ÛŒÙ† Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø¨Ù‡ Ø´Ù…Ø§ Ú©Ù…Ú© Ù…ÛŒâ€ŒÚ©Ù†Ø¯ ØªØ§ Ø±Ú˜ÛŒÙ… ØºØ°Ø§ÛŒÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù‡ Ø¯Ù‚Øª Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù†ÛŒØ¯ØŒ Ù…ØµØ±Ù Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ Ùˆ Ø¢Ø¨ Ø±Ø§ Ø«Ø¨Øª Ú©Ù†ÛŒØ¯ Ùˆ Ø¨Ø§ ØªÛŒÙ… Ø¯Ø±Ù…Ø§Ù†ÛŒ Ø®ÙˆØ¯ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§Ø´ÛŒØ¯.</p> 
   <div class="intro-tabs"> 
    <div class="tab-row"> <button class="intro-tab-button register" onclick="openTab('dashboard')"><i class="fas fa-home"></i> Ø«Ø¨Øª Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ</button> <button class="intro-tab-button intakeHistory" onclick="openTab('intakeHistory')"><i class="fas fa-history"></i> ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù…ØµØ±Ù</button> 
    </div> 
    <div class="tab-row"> <button class="intro-tab-button foodList" onclick="openTab('foodList')"><i class="fas fa-utensils"></i> Ù„ÛŒØ³Øª Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ</button> <button class="intro-tab-button videos" onclick="openTab('videos')"><i class="fas fa-video"></i> ÙÛŒÙ„Ù…â€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ</button> 
    </div> 
    <div class="tab-row"> <button class="intro-tab-button tutorial" onclick="openTab('tutorial')"><i class="fas fa-book"></i> Ø¢Ù…ÙˆØ²Ø´ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù†</button> <button class="intro-tab-button settings" onclick="openTab('settings')"><i class="fas fa-cog"></i> ØªÙ†Ø¸ÛŒÙ…Ø§Øª</button> 
    </div> 
    <div class="tab-row"> <button class="intro-tab-button contact" onclick="openTab('contact')"><i class="fas fa-phone"></i> Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ ØªÛŒÙ…</button> <button class="intro-tab-button about" onclick="openTab('about')"><i class="fas fa-info-circle"></i> Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§</button> 
    </div> 
   </div> 
  </div> 
  <div class="container"> 
   <div class="content-area" id="contentArea"> 
    <div class="nav-buttons"> <button class="nav-button" onclick="goBack()"><i class="fas fa-arrow-right"></i> Ø¨Ø±Ú¯Ø´Øª</button> 
    </div> 
    <h1>Ù…Ø¯ÛŒØ±ÛŒØª ØªØºØ°ÛŒÙ‡ Ø¨ÛŒÙ…Ø§Ø±Ø§Ù† Ø¯ÛŒØ§Ù„ÛŒØ²ÛŒ</h1> 
    <div id="errorMessage" class="error-message" style="display: none;"></div> 
    <section id="dashboard" class="tab-content"> 
     <h2><i class="fas fa-home"></i> Ù…Ù‚Ø§Ø¯ÛŒØ± Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ</h2> <button class="delete-all-data-button" onclick="resetAllData()"><i class="fas fa-trash-alt"></i> Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§</button> 
     <div class="charts-container"> 
      <div class="chart-wrapper"> 
       <canvas id="sodiumChart"></canvas> <span id="sodiumSticker">ğŸ˜Š</span> 
      </div> 
      <div class="chart-wrapper"> 
       <canvas id="potassiumChart"></canvas> <span id="potassiumSticker">ğŸ˜Š</span> 
      </div> 
      <div class="chart-wrapper"> 
       <canvas id="phosphorusChart"></canvas> <span id="phosphorusSticker">ğŸ˜Š</span> 
      </div> 
      <div class="chart-wrapper"> 
       <canvas id="proteinChart"></canvas> <span id="proteinSticker">ğŸ˜Š</span> 
      </div> 
      <div class="chart-wrapper"> 
       <canvas id="waterChart"></canvas> <span id="waterSticker">ğŸ˜Š</span> 
      </div> 
     </div> 
     <div id="warnings"></div> 
     <div id="currentTotals" class="scrollable"> 
      <p>Ø³Ø¯ÛŒÙ… Ù…ØµØ±ÙÛŒ: <span id="totalSodiumMg">0</span> Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù… (Ø­Ø¯ Ù…Ø¬Ø§Ø²: <span id="sodiumLimitDisplayMg"></span> Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…)</p> 
      <p>Ù¾ØªØ§Ø³ÛŒÙ… Ù…ØµØ±ÙÛŒ: <span id="totalPotassiumMg">0</span> Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù… (Ø­Ø¯ Ù…Ø¬Ø§Ø²: <span id="potassiumLimitDisplayMg"></span> Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…)</p> 
      <p>ÙØ³ÙØ± Ù…ØµØ±ÙÛŒ: <span id="totalPhosphorusMg">0</span> Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù… (Ø­Ø¯ Ù…Ø¬Ø§Ø²: <span id="phosphorusLimitDisplayMg"></span> Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…)</p> 
      <p>Ù¾Ø±ÙˆØªØ¦ÛŒÙ† Ù…ØµØ±ÙÛŒ: <span id="totalProteinMg">0</span> Ú¯Ø±Ù… (Ø­Ø¯ Ù…Ø¬Ø§Ø²: <span id="proteinLimitDisplayMg"></span> Ú¯Ø±Ù…)</p> 
      <p>Ø¢Ø¨ Ù…ØµØ±ÙÛŒ: <span id="totalWaterMl">0</span> Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ± (Ø­Ø¯ Ù…Ø¬Ø§Ø²: <span id="waterLimitDisplayMl"></span> Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±)</p> 
      <p>Ú©Ø§Ù„Ø±ÛŒ Ù…ØµØ±ÙÛŒ: <span id="totalKcal">0</span> Ú©ÛŒÙ„ÙˆÚ©Ø§Ù„Ø±ÛŒ</p> 
      <p>Ù…Ù‚Ø¯Ø§Ø± Ø§Ø¯Ø±Ø§Ø± Û²Û´ Ø³Ø§Ø¹ØªÙ‡: <span id="dailyUrineOutput">0</span> Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±</p> 
     </div> 
     <h3><i class="fas fa-utensils"></i> Ø«Ø¨Øª Ù…ØµØ±Ù ØºØ°Ø§</h3> 
     <form id="foodIntakeForm" onsubmit="addIntake(event)"> 
      <div class="search-container"> <label for="foodSearch"><i class="fas fa-search"></i> Ø¬Ø³ØªØ¬ÙˆÛŒ ØºØ°Ø§:</label> 
       <input type="text" id="foodSearch" name="foodSearch" placeholder="Ù†Ø§Ù… ØºØ°Ø§ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"> <i class="fas fa-search"></i> 
      </div> <label for="foodSelect"><i class="fas fa-list"></i> Ø§Ù†ØªØ®Ø§Ø¨ ØºØ°Ø§:</label> <select id="foodSelect" name="foodSelect" required> <option value="">ÛŒÚ© ØºØ°Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option> </select> <label for="quantity"><i class="fas fa-weight"></i> Ù…Ù‚Ø¯Ø§Ø± (ÙˆØ§Ø­Ø¯):</label> 
      <input type="number" id="quantity" name="quantity" step="0.01" required> <label for="mealType"><i class="fas fa-clock"></i> ÙˆØ¹Ø¯Ù‡ ØºØ°Ø§ÛŒÛŒ:</label> <select id="mealType" name="mealType" required> <option value="ØµØ¨Ø­Ø§Ù†Ù‡">ØµØ¨Ø­Ø§Ù†Ù‡</option> <option value="Ù†Ø§Ù‡Ø§Ø±">Ù†Ø§Ù‡Ø§Ø±</option> <option value="Ø´Ø§Ù…">Ø´Ø§Ù…</option> <option value="Ù…ÛŒØ§Ù†â€ŒÙˆØ¹Ø¯Ù‡">Ù…ÛŒØ§Ù†â€ŒÙˆØ¹Ø¯Ù‡</option> </select> <button type="submit" class="add-button"><i class="fas fa-plus"></i> Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù†</button> 
     </form> 
     <h3><i class="fas fa-glass-whiskey"></i> Ø«Ø¨Øª Ù…ØµØ±Ù Ø¢Ø¨ (Ù„ÛŒÙˆØ§Ù† Û²Û°Û° Ø³ÛŒâ€ŒØ³ÛŒ)</h3> 
     <form id="waterIntakeForm" onsubmit="addWaterIntake(event)"> <label for="waterCups"><i class="fas fa-tint"></i> ØªØ¹Ø¯Ø§Ø¯ Ù„ÛŒÙˆØ§Ù†â€ŒÙ‡Ø§:</label> 
      <input type="number" id="waterCups" name="waterCups" step="0.01" required> <button type="submit" class="add-button"><i class="fas fa-plus"></i> Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù†</button> 
     </form> 
     <h3><i class="fas fa-tint-slash"></i> Ø«Ø¨Øª Ù…Ù‚Ø¯Ø§Ø± Ø§Ø¯Ø±Ø§Ø± (Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±)</h3> 
     <form id="urineIntakeForm" onsubmit="addUrineOutput(event)"> <label for="urineAmount"><i class="fas fa-tint"></i> Ù…Ù‚Ø¯Ø§Ø± Ø§Ø¯Ø±Ø§Ø± (Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±):</label> 
      <input type="number" id="urineAmount" name="urineAmount" step="0.01" required> <button type="submit" class="add-button"><i class="fas fa-plus"></i> Ø«Ø¨Øª</button> 
     </form> 
    </section> 
    <section id="intakeHistory" class="tab-content"> 
     <h2><i class="fas fa-history"></i> ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù…ØµØ±Ù Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ Ø´Ù…Ø§</h2> <button class="delete-all-button" onclick="deleteAllIntakes()"><i class="fas fa-trash"></i> Ø­Ø°Ù Ù‡Ù…Ù‡</button> 
     <div class="table-wrapper"> 
      <div id="intakeTableBody"></div> 
     </div> 
    </section> 
    <section id="foodList" class="tab-content"> 
     <h2><i class="fas fa-utensils"></i> Ù„ÛŒØ³Øª Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ</h2> 
     <div> <label for="filterSelect"><i class="fas fa-filter"></i> ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³:</label> <select id="filterSelect" onchange="filterFoodDatabase()"> <option value="all">Ù‡Ù…Ù‡</option> <option value="lowPotassium">Ú©Ù…â€ŒÙ¾ØªØ§Ø³ÛŒÙ…</option> <option value="lowPhosphorus">Ú©Ù…â€ŒÙØ³ÙØ±</option> <option value="lowSodium">Ú©Ù…â€ŒØ³Ø¯ÛŒÙ…</option> </select> 
     </div> 
     <div id="foodCategories"></div> <button class="add-button" onclick="showAddFoodForm()"><i class="fas fa-plus"></i> Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† ØºØ°Ø§</button> 
     <form id="addFoodForm" style="display: none;" onsubmit="addFood(event)"> 
      <h3><i class="fas fa-utensils"></i> Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù†/ÙˆÛŒØ±Ø§ÛŒØ´ ØºØ°Ø§</h3> 
      <input type="hidden" id="foodIndex" name="foodIndex"> <label for="foodName"><i class="fas fa-tag"></i> Ù†Ø§Ù… ØºØ°Ø§:</label> 
      <input type="text" id="foodName" name="foodName" required> <label for="foodCategory"><i class="fas fa-list-alt"></i> Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ:</label> <select id="foodCategory" name="foodCategory" required> <option value="Ú¯ÙˆØ´Øª">Ú¯ÙˆØ´Øª</option> <option value="Ø³Ø¨Ø²ÛŒØ¬Ø§Øª">Ø³Ø¨Ø²ÛŒØ¬Ø§Øª</option> <option value="Ù„Ø¨Ù†ÛŒØ§Øª">Ù„Ø¨Ù†ÛŒØ§Øª</option> <option value="ØºÙ„Ø§Øª">ØºÙ„Ø§Øª</option> <option value="Ù…ÛŒÙˆÙ‡â€ŒÙ‡Ø§">Ù…ÛŒÙˆÙ‡â€ŒÙ‡Ø§</option> </select> <label for="foodImage"><i class="fas fa-image"></i> ØªØµÙˆÛŒØ± ØºØ°Ø§:</label> 
      <input type="file" id="foodImage" name="foodImage" accept="image/*"> <label for="foodSodium"><i class="fas fa-flask"></i> Ø³Ø¯ÛŒÙ… (Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…):</label> 
      <input type="number" id="foodSodium" name="foodSodium" step="0.001" required> <label for="foodPotassium"><i class="fas fa-flask"></i> Ù¾ØªØ§Ø³ÛŒÙ… (Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…):</label> 
      <input type="number" id="foodPotassium" name="foodPotassium" step="0.001" required> <label for="foodPhosphorus"><i class="fas fa-flask"></i> ÙØ³ÙØ± (Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…):</label> 
      <input type="number" id="foodPhosphorus" name="foodPhosphorus" step="0.001" required> <label for="foodProtein"><i class="fas fa-drumstick-bite"></i> Ù¾Ø±ÙˆØªØ¦ÛŒÙ† (Ú¯Ø±Ù…):</label> 
      <input type="number" id="foodProtein" name="foodProtein" step="0.01" required> <label for="foodWater"><i class="fas fa-tint"></i> Ø¢Ø¨ (Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±):</label> 
      <input type="number" id="foodWater" name="foodWater" step="0.01" required> <label for="foodKcal"><i class="fas fa-fire"></i> Ú©Ø§Ù„Ø±ÛŒ (Ú©ÛŒÙ„ÙˆÚ©Ø§Ù„Ø±ÛŒ):</label> 
      <input type="number" id="foodKcal" name="foodKcal" step="0.01" required> <label for="foodCarb"><i class="fas fa-bread-slice"></i> Ú©Ø±Ø¨ÙˆÙ‡ÛŒØ¯Ø±Ø§Øª (Ú¯Ø±Ù…):</label> 
      <input type="number" id="foodCarb" name="foodCarb" step="0.01" required> <label for="foodFat"><i class="fas fa-cheese"></i> Ú†Ø±Ø¨ÛŒ (Ú¯Ø±Ù…):</label> 
      <input type="number" id="foodFat" name="foodFat" step="0.01" required> <button type="submit" class="save-button"><i class="fas fa-save"></i> Ø°Ø®ÛŒØ±Ù‡</button> 
     </form> 
    </section> 
    <section id="videos" class="tab-content"> 
     <h2><i class="fas fa-video"></i> ÙÛŒÙ„Ù…â€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ</h2> 
     <div class="video-container"> 
      <h3>Ø±Ú˜ÛŒÙ… Ø®Ø§Øµ</h3> <iframe src="https://www.aparat.com/video/video/embed/videohash/vhf4z5z/vt/frame" allowfullscreen="true"></iframe> 
     </div> 
     <div class="video-container"> 
      <h3>ÙØ³ÙØ±</h3> <iframe src="https://www.aparat.com/video/video/embed/videohash/hlqzdki/vt/frame" allowfullscreen="true"></iframe> 
     </div> 
     <div class="video-container"> 
      <h3>Ù¾ØªØ§Ø³ÛŒÙ…</h3> <iframe src="https://www.aparat.com/video/video/embed/videohash/ifu44gz/vt/frame" allowfullscreen="true"></iframe> 
     </div> 
     <div class="video-container"> 
      <h3>Ø³Ø¯ÛŒÙ… Ùˆ Ø¢Ø¨</h3> <iframe src="https://www.aparat.com/video/video/embed/videohash/lof5k6h/vt/frame" allowfullscreen="true"></iframe> 
     </div> 
     <div class="video-container"> 
      <h3>Ù‚Ù†Ø¯ Ùˆ Ø§Ù†Ø±Ú˜ÛŒ</h3> <iframe src="https://www.aparat.com/video/video/embed/videohash/hjc3195/vt/frame" allowfullscreen="true"></iframe> 
     </div> 
    </section> 
    <section id="tutorial" class="tab-content"> 
     <h2><i class="fas fa-book"></i> Ø¢Ù…ÙˆØ²Ø´ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù†</h2> 
     <div class="video-container"> 
      <h3>Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† ØªØºØ°ÛŒÙ‡ Ø¯ÛŒØ§Ù„ÛŒØ²ÛŒ</h3> <iframe src="https://www.aparat.com/video/video/embed/videohash/TUTORIAL123/vt/frame" allowfullscreen="true"></iframe> 
     </div> 
    </section> 
    <section id="settings" class="tab-content"> 
     <h2><i class="fas fa-cog"></i> ØªÙ†Ø¸ÛŒÙ…Ø§Øª</h2> 
     <form id="settingsForm" onsubmit="saveSettings(event)"> <label for="ibw"><i class="fas fa-weight"></i> ÙˆØ²Ù† Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„ Ø¨Ø¯Ù† (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…):</label> <small>ÙˆØ²Ù† Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„ Ø¨ÛŒÙ…Ø§Ø± (Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…) Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ ØªØ§ Ø­Ø¯ÙˆØ¯ Ù…ÙˆØ§Ø¯ Ù…ØºØ°ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø´ÙˆØ¯.</small> <small>ÙØ±Ù…ÙˆÙ„â€ŒÙ‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ ÙˆØ²Ù† Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„ ØªÙ†Ø¸ÛŒÙ… Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.</small> 
      <input type="number" id="ibw" name="ibw" step="0.01" placeholder="ÙˆØ²Ù† Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯" required> <label for="urineOutput"><i class="fas fa-tint"></i> Ø­Ø¬Ù… Ø§Ø¯Ø±Ø§Ø± Ø±ÙˆØ²Ø§Ù†Ù‡ (Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±):</label> <small>Ø­Ø¬Ù… Ø§Ø¯Ø±Ø§Ø± Ø±ÙˆØ²Ø§Ù†Ù‡ Ø¨ÛŒÙ…Ø§Ø± (Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±) Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.</small> 
      <input type="number" id="urineOutput" name="urineOutput" step="0.01" placeholder="Ø­Ø¬Ù… Ø§Ø¯Ø±Ø§Ø± Ø±ÙˆØ²Ø§Ù†Ù‡"> <label for="minimumUrineOutput"><i class="fas fa-tint-slash"></i> Ø­Ø¯Ø§Ù‚Ù„ Ù…Ù‚Ø¯Ø§Ø± Ø§Ø¯Ø±Ø§Ø± Ù…Ø¬Ø§Ø² (Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±):</label> <small>Ø­Ø¯Ø§Ù‚Ù„ Ø§Ø¯Ø±Ø§Ø± Ù…Ø¬Ø§Ø² (Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±) Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ ØªØ§ Ù‡Ø´Ø¯Ø§Ø± Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯.</small> 
      <input type="number" id="minimumUrineOutput" name="minimumUrineOutput" step="0.01" placeholder="Ø­Ø¯Ø§Ù‚Ù„ Ù…Ù‚Ø¯Ø§Ø± Ø§Ø¯Ø±Ø§Ø±" required> <label for="sodiumLimit"><i class="fas fa-flask"></i> Ø­Ø¯ Ø³Ø¯ÛŒÙ… (Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…):</label> <small>Ø­Ø¯ Ù…Ø¬Ø§Ø² Ø³Ø¯ÛŒÙ… (Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…). ÙØ±Ù…ÙˆÙ„: Û²Û³Û°Û° Ã— (ÙˆØ²Ù† Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„ / Û·Û°) Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…</small> 
      <input type="number" id="sodiumLimit" name="sodiumLimit" step="0.001" readonly> <label for="potassiumLimit"><i class="fas fa-flask"></i> Ø­Ø¯ Ù¾ØªØ§Ø³ÛŒÙ… (Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…):</label> <small>Ø­Ø¯ Ù…Ø¬Ø§Ø² Ù¾ØªØ§Ø³ÛŒÙ… (Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…). ÙØ±Ù…ÙˆÙ„: Û²ÛµÛ°Û° Ã— (ÙˆØ²Ù† Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„ / Û·Û°) Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…</small> 
      <input type="number" id="potassiumLimit" name="potassiumLimit" step="0.001" readonly> <label for="phosphorusLimit"><i class="fas fa-flask"></i> Ø­Ø¯ ÙØ³ÙØ± (Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…):</label> <small>Ø­Ø¯ Ù…Ø¬Ø§Ø² ÙØ³ÙØ± (Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…). ÙØ±Ù…ÙˆÙ„: Û¹Û°Û° Ã— (ÙˆØ²Ù† Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„ / Û·Û°) Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…</small> 
      <input type="number" id="phosphorusLimit" name="phosphorusLimit" step="0.001" readonly> <label for="proteinLimit"><i class="fas fa-drumstick-bite"></i> Ø­Ø¯ Ù¾Ø±ÙˆØªØ¦ÛŒÙ† (Ú¯Ø±Ù…):</label> <small>Ø­Ø¯ Ù…Ø¬Ø§Ø² Ù¾Ø±ÙˆØªØ¦ÛŒÙ† (Ú¯Ø±Ù…). ÙØ±Ù…ÙˆÙ„: Û±.Û² Ã— ÙˆØ²Ù† Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„ Ú¯Ø±Ù…</small> 
      <input type="number" id="proteinLimit" name="proteinLimit" step="0.01" readonly> <label for="waterLimit"><i class="fas fa-tint"></i> Ø­Ø¯ Ø¢Ø¨ (Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±):</label> <small>Ø­Ø¯ Ù…Ø¬Ø§Ø² Ø¢Ø¨ (Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±). ÙØ±Ù…ÙˆÙ„: Û±Û°Û°Û° + Ø§Ø¯Ø±Ø§Ø± Ø±ÙˆØ²Ø§Ù†Ù‡ + (ÛµÛ° Ã— ÙˆØ²Ù† Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„) Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±</small> 
      <input type="number" id="waterLimit" name="waterLimit" step="0.01" readonly> <label for="fontSize"><i class="fas fa-font"></i> Ø§Ù†Ø¯Ø§Ø²Ù‡ ÙÙˆÙ†Øª:</label> <small>Ø§Ù†Ø¯Ø§Ø²Ù‡ ÙÙˆÙ†Øª Ù…ØªÙ† Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø®ÙˆØ§Ù†Ø§ÛŒÛŒ Ø¨Ù‡ØªØ± Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.</small> <select id="fontSize" name="fontSize"> <option value="small">Ú©ÙˆÚ†Ú©</option> <option value="medium">Ù…ØªÙˆØ³Ø·</option> <option value="large" selected>Ø¨Ø²Ø±Ú¯</option> </select> <button type="submit" class="save-button"><i class="fas fa-save"></i> Ø°Ø®ÛŒØ±Ù‡</button> 
     </form> 
    </section> 
    <section id="contact" class="tab-content"> 
     <h2><i class="fas fa-phone"></i> Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ ØªÛŒÙ… Ø¯Ø±Ù…Ø§Ù†ÛŒ</h2> 
     <p>Ø¨Ø±Ø§ÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ ØªÛŒÙ… Ø¯Ø±Ù…Ø§Ù†ÛŒ Ùˆ Ù…Ø·Ø±Ø­ Ú©Ø±Ø¯Ù† Ø³ÙˆØ§Ù„Ø§Øª Ø®ÙˆØ¯ØŒ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ø²ÛŒØ± Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯:</p> <button class="contact-button" onclick="sendSMS()"><i class="fas fa-sms"></i> Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…Ú© Ø¨Ù‡ ØªÛŒÙ… Ø¯Ø±Ù…Ø§Ù†ÛŒ</button> 
    </section> 
    <section id="about" class="tab-content"> 
     <h2><i class="fas fa-info-circle"></i> Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§</h2> 
     <img src="./mums_logo.png" alt="Ù„ÙˆÚ¯Ùˆ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ø¹Ù„ÙˆÙ… Ù¾Ø²Ø´Ú©ÛŒ Ù…Ø´Ù‡Ø¯" class="about-logo"> 
     <p>Ø§ÛŒÙ† Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† ØªÙˆØ³Ø· ØªÛŒÙ… ØªØ­Ù‚ÛŒÙ‚Ø§ØªÛŒ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ø¹Ù„ÙˆÙ… Ù¾Ø²Ø´Ú©ÛŒ Ù…Ø´Ù‡Ø¯ ØªÙˆØ³Ø¹Ù‡ ÛŒØ§ÙØªÙ‡ Ø§Ø³Øª. ØªÛŒÙ… Ù…Ø§ Ù…ØªØ´Ú©Ù„ Ø§Ø² Ù…ØªØ®ØµØµØ§Ù† ØªØºØ°ÛŒÙ‡ØŒ Ù¾Ø²Ø´Ú©Ø§Ù† Ù†ÙØ±ÙˆÙ„ÙˆÚ˜ÛŒ Ùˆ Ù…Ù‡Ù†Ø¯Ø³Ø§Ù† Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø± Ø§Ø³Øª Ú©Ù‡ Ø¨Ø§ Ù‡Ø¯Ù Ø¨Ù‡Ø¨ÙˆØ¯ Ú©ÛŒÙÛŒØª Ø²Ù†Ø¯Ú¯ÛŒ Ø¨ÛŒÙ…Ø§Ø±Ø§Ù† Ø¯ÛŒØ§Ù„ÛŒØ²ÛŒ ÙØ¹Ø§Ù„ÛŒØª Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯. Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† ØªØºØ°ÛŒÙ‡ Ø¯ÛŒØ§Ù„ÛŒØ²ÛŒ Ø¨Ù‡ Ø¨ÛŒÙ…Ø§Ø±Ø§Ù† Ú©Ù…Ú© Ù…ÛŒâ€ŒÚ©Ù†Ø¯ ØªØ§ Ø±Ú˜ÛŒÙ… ØºØ°Ø§ÛŒÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù‡ Ø¯Ù‚Øª Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø±Ø¯Ù‡ Ùˆ Ø¨Ø§ Ø«Ø¨Øª Ù…ØµØ±Ù Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒØŒ Ø¢Ø¨ Ùˆ Ø§Ø¯Ø±Ø§Ø±ØŒ Ø³Ù„Ø§Ù…Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù‡ØªØ± Ú©Ù†ØªØ±Ù„ Ú©Ù†Ù†Ø¯.</p> 
     <p>Ù…Ø§ Ø¯Ø± ØªÙ„Ø§Ø´ Ù‡Ø³ØªÛŒÙ… ØªØ§ Ø¨Ø§ Ø§Ø±Ø§Ø¦Ù‡ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ Ùˆ Ø¢Ù…ÙˆØ²Ø´â€ŒÙ‡Ø§ÛŒ Ø¨Ù‡â€ŒØ±ÙˆØ²ØŒ Ø¨ÛŒÙ…Ø§Ø±Ø§Ù† Ø¯ÛŒØ§Ù„ÛŒØ²ÛŒ Ø±Ø§ Ø¯Ø± Ù…Ø³ÛŒØ± Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ù‡ØªØ± Ø¨ÛŒÙ…Ø§Ø±ÛŒ Ø®ÙˆØ¯ ÛŒØ§Ø±ÛŒ Ú©Ù†ÛŒÙ…. Ø¨Ø±Ø§ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨ÛŒØ´ØªØ± Ø¨Ø§ ØªÛŒÙ… Ø¯Ø±Ù…Ø§Ù†ÛŒ Ù…Ø§ ØªÙ…Ø§Ø³ Ø¨Ú¯ÛŒØ±ÛŒØ¯.</p> 
    </section> 
   </div> 
  </div> 
  <script>
    let pageHistory = [];

    function generateDeviceId() {
      const userAgent = navigator.userAgent;
      const randomString = Math.random().toString(36).substring(2, 15);
      return btoa(userAgent + randomString).substring(0, 20);
    }

    const deviceId = localStorage.getItem('deviceId') || generateDeviceId();
    localStorage.setItem('deviceId', deviceId);

    const storageKey = `dialysisAppData_${deviceId}`;
    let userData = {};
    try {
      userData = JSON.parse(localStorage.getItem(storageKey)) || {};
    } catch (e) {
      console.error('Error loading data from localStorage:', e);
      userData = {};
    }

    userData = {
      intakeHistory: userData.intakeHistory || [],
      foodDB: userData.foodDB || [],
      limits: userData.limits || {
        sodium: 2300,
        potassium: 2500,
        phosphorus: 900,
        protein: 80,
        water: 1000
      },
      ibw: userData.ibw || null,
      urineOutput: userData.urineOutput || null,
      minimumUrineOutput: userData.minimumUrineOutput || 500,
      fontSize: userData.fontSize || 'large'
    };

    let intakeHistory = userData.intakeHistory;
    let foodDB = userData.foodDB;
    let limits = userData.limits;
    let charts = {};

    async function loadFoodDatabaseFromJSON() {
      const jsonURL = 'https://sanaeih1.github.io/Foods/foods.json';
      try {
        const response = await fetch(jsonURL);
        if (!response.ok) {
          throw new Error('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª ÙØ§ÛŒÙ„ JSON');
        }
        const newFoods = await response.json();
        const requiredFields = ['name', 'category', 'sodium', 'potassium', 'phosphorus', 'protein', 'water', 'carb', 'fat', 'kcal', 'bloodSugarImpact', 'restrictions', 'unit'];
        const isValid = newFoods.every(food => 
          requiredFields.every(field => food.hasOwnProperty(field)) &&
          typeof food.sodium === 'number' &&
          typeof food.potassium === 'number' &&
          typeof food.phosphorus === 'number' &&
          typeof food.protein === 'number' &&
          typeof food.water === 'number' &&
          typeof food.carb === 'number' &&
          typeof food.fat === 'number' &&
          typeof food.kcal === 'number'
        );

        if (!isValid) {
          showError('ÙØ§ÛŒÙ„ JSON Ø³Ø§Ø®ØªØ§Ø± Ù…Ø¹ØªØ¨Ø±ÛŒ Ù†Ø¯Ø§Ø±Ø¯ ÛŒØ§ Ù…Ù‚Ø§Ø¯ÛŒØ± Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ù‡Ø³ØªÙ†Ø¯.');
          return;
        }

        foodDB = [...foodDB, ...newFoods];
        saveData();
        populateFoodSelect();
        displayFoodDatabase();
      } catch (e) {
        showError('Ø®Ø·Ø§ Ø¯Ø± Ù„ÙˆØ¯ ÙØ§ÛŒÙ„ JSON. Ù„Ø·ÙØ§Ù‹ Ø§ØªØµØ§Ù„ Ø§ÛŒÙ†ØªØ±Ù†Øª ÛŒØ§ Ø¢Ø¯Ø±Ø³ ÙØ§ÛŒÙ„ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.');
        console.error('Error loading JSON:', e);
      }
    }

    window.onload = function() {
      loadFoodDatabaseFromJSON().then(() => {
        applySettings();
        loadSettings(); // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª
        populateFoodSelect();
        displayIntakeHistory();
        displayFoodDatabase();
        updateDashboard();
      });
      document.getElementById('foodSearch').addEventListener('input', filterFoodSelect);
    };

    function applySettings() {
      applyFontSize(userData.fontSize);
    }

    function loadSettings() {
      if (userData.ibw) {
        document.getElementById('ibw').value = userData.ibw.toFixed(2);
      }
      if (userData.urineOutput) {
        document.getElementById('urineOutput').value = userData.urineOutput.toFixed(2);
      }
      if (userData.minimumUrineOutput) {
        document.getElementById('minimumUrineOutput').value = userData.minimumUrineOutput.toFixed(2);
      }
      document.getElementById('fontSize').value = userData.fontSize || 'large';

      // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø­Ø¯ÙˆØ¯ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ù‚Ø§Ø¯ÛŒØ± Ø°Ø®ÛŒØ±Ù‡â€ŒØ´Ø¯Ù‡
      if (userData.ibw) {
        limits = {
          sodium: parseFloat((2300 * (userData.ibw / 70)).toFixed(2)),
          potassium: parseFloat((2500 * (userData.ibw / 70)).toFixed(2)),
          phosphorus: parseFloat((900 * (userData.ibw / 70)).toFixed(2)),
          protein: parseFloat((userData.ibw * 1.2).toFixed(2)),
          water: parseFloat((1000 + (userData.urineOutput || 0) + (userData.ibw * 50)).toFixed(2))
        };
      }

      displayLimits();
    }

    function showError(message) {
      const errorDiv = document.getElementById('errorMessage');
      errorDiv.textContent = message;
      errorDiv.style.display = 'block';
      setTimeout(() => {
        errorDiv.style.display = 'none';
      }, 5000);
    }

    function applyFontSize(size) {
      let fontSize;
      switch (size) {
        case 'small': fontSize = '0.9rem'; break;
        case 'medium': fontSize = '1rem'; break;
        case 'large': fontSize = '1.2rem'; break;
        default: fontSize = '1.2rem';
      }
      document.documentElement.style.fontSize = fontSize;
      userData.fontSize = size;
      saveData();
    }

    function saveData() {
      try {
        userData.intakeHistory = intakeHistory;
        userData.foodDB = foodDB;
        userData.limits = limits;
        userData.ibw = parseFloat(document.getElementById('ibw').value) || null;
        userData.urineOutput = parseFloat(document.getElementById('urineOutput').value) || null;
        userData.minimumUrineOutput = parseFloat(document.getElementById('minimumUrineOutput').value) || 500;
        userData.fontSize = document.getElementById('fontSize').value || 'large';
        localStorage.setItem(storageKey, JSON.stringify(userData));
      } catch (e) {
        showError('Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.');
        console.error('Error saving data to localStorage:', e);
      }
    }

    function saveSettings(event) {
      event.preventDefault();
      const ibw = parseFloat(document.getElementById('ibw').value);
      const urineOutput = parseFloat(document.getElementById('urineOutput').value) || 0;
      const minimumUrineOutput = parseFloat(document.getElementById('minimumUrineOutput').value);

      if (isNaN(ibw) || ibw <= 0) {
        showError('Ù„Ø·ÙØ§Ù‹ ÙˆØ²Ù† Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„ Ù…Ø¹ØªØ¨Ø±ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
        return;
      }
      if (isNaN(minimumUrineOutput) || minimumUrineOutput <= 0) {
        showError('Ù„Ø·ÙØ§Ù‹ Ø­Ø¯Ø§Ù‚Ù„ Ù…Ù‚Ø¯Ø§Ø± Ø§Ø¯Ø±Ø§Ø± Ù…Ø¹ØªØ¨Ø±ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
        return;
      }

      userData.ibw = ibw;
      userData.urineOutput = urineOutput;
      userData.minimumUrineOutput = minimumUrineOutput;

      limits = {
        sodium: parseFloat((2300 * (ibw / 70)).toFixed(2)),
        potassium: parseFloat((2500 * (ibw / 70)).toFixed(2)),
        phosphorus: parseFloat((900 * (ibw / 70)).toFixed(2)),
        protein: parseFloat((ibw * 1.2).toFixed(2)),
        water: parseFloat((1000 + urineOutput + (ibw * 50)).toFixed(2))
      };

      saveData();
      displayLimits();
      updateDashboard();
      applyFontSize(document.getElementById('fontSize').value);
      showError('ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯.');
    }

    function openTab(tabName) {
      document.getElementById('introPage').style.display = 'none';
      document.getElementById('contentArea').style.display = 'block';
      const tabContents = document.getElementsByClassName('tab-content');
      for (let i = 0; i < tabContents.length; i++) {
        tabContents[i].classList.remove('active');
      }
      document.getElementById(tabName).classList.add('active');
      pageHistory.push(tabName);
    }

    function goBack() {
      if (pageHistory.length > 1) {
        pageHistory.pop();
        const previousPage = pageHistory[pageHistory.length - 1];
        openTab(previousPage);
      } else {
        document.getElementById('introPage').style.display = 'block';
        document.getElementById('contentArea').style.display = 'none';
        const tabContents = document.getElementsByClassName('tab-content');
        for (let i = 0; i < tabContents.length; i++) {
          tabContents[i].classList.remove('active');
        }
        pageHistory = [];
      }
    }

    function resetAllData() {
      if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ ØªÙ…Ø§Ù… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ (Ø´Ø§Ù…Ù„ ØªØ§Ø±ÛŒØ®Ú†Ù‡ØŒ Ù…ÙˆØ§Ø¯ ØºØ°Ø§ÛŒÛŒ Ùˆ ØªÙ†Ø¸ÛŒÙ…Ø§Øª) Ø±Ø§ Ù¾Ø§Ú© Ú©Ù†ÛŒØ¯ØŸ Ø§ÛŒÙ† Ø¹Ù…Ù„ÛŒØ§Øª Ù‚Ø§Ø¨Ù„ Ø¨Ø§Ø²Ú¯Ø´Øª Ù†ÛŒØ³Øª.')) {
        intakeHistory = [];
        foodDB = [];
        loadFoodDatabaseFromJSON();
        limits = { sodium: 2300, potassium: 2500, phosphorus: 900, protein: 80, water: 1000 };
        userData = {
          intakeHistory: [],
          foodDB: foodDB,
          limits: limits,
          ibw: null,
          urineOutput: null,
          minimumUrineOutput: 500,
          fontSize: 'large'
        };
        localStorage.setItem(storageKey, JSON.stringify(userData));
        populateFoodSelect();
        displayIntakeHistory();
        displayFoodDatabase();
        displayLimits();
        updateDashboard();
        showError('ØªÙ…Ø§Ù… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ù¾Ø§Ú© Ø´Ø¯Ù†Ø¯.');
      }
    }

    function setupAccordion() {
      const buttons = document.getElementsByClassName('accordion-button');
      for (let i = 0; i < buttons.length; i++) {
        buttons[i].addEventListener('click', function() {
          const content = this.nextElementSibling;
          content.classList.toggle('active');
        });
      }
    }

    function populateFoodSelect(searchTerm = '') {
      const foodSelect = document.getElementById('foodSelect');
      foodSelect.innerHTML = '<option value="">ÛŒÚ© ØºØ°Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>';
      foodDB
        .filter(food => searchTerm === '' || food.name.toLowerCase().includes(searchTerm.toLowerCase()))
        .forEach((food, index) => {
          const option = document.createElement('option');
          option.value = index;
          option.textContent = `${food.name} (${food.unit})`;
          foodSelect.appendChild(option);
        });
    }

    function filterFoodSelect() {
      const searchTerm = document.getElementById('foodSearch').value;
      populateFoodSelect(searchTerm);
    }

    function addIntake(event) {
      event.preventDefault();
      const foodSelect = document.getElementById('foodSelect');
      const quantityInput = document.getElementById('quantity');
      const mealTypeSelect = document.getElementById('mealType');

      const foodIndex = parseInt(foodSelect.value);
      const quantity = parseFloat(quantityInput.value);
      const mealType = mealTypeSelect.value;

      if (isNaN(foodIndex) || foodIndex < 0 || foodIndex >= foodDB.length) {
        showError('Ù„Ø·ÙØ§Ù‹ ÛŒÚ© ØºØ°Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.');
        return;
      }
      if (isNaN(quantity) || quantity <= 0) {
        showError('Ù„Ø·ÙØ§Ù‹ Ù…Ù‚Ø¯Ø§Ø± Ù…Ø¹ØªØ¨Ø±ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
        return;
      }
      if (!mealType) {
        showError('Ù„Ø·ÙØ§Ù‹ ÛŒÚ© ÙˆØ¹Ø¯Ù‡ ØºØ°Ø§ÛŒÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.');
        return;
      }

      const food = foodDB[foodIndex];
      let date;
      try {
        const persianDate = new persianDate();
        date = persianDate.format('dddd D MMMM YYYY');
      } catch (e) {
        console.error('Error with persianDate:', e);
        date = new Date().toLocaleDateString('fa-IR');
      }

      const timestamp = new Date().getTime();

      const intake = {
        type: 'food',
        date: date,
        timestamp: timestamp,
        mealType: mealType,
        food: food.name,
        quantity: quantity,
        unit: food.unit,
        sodium: parseFloat(((food.sodium || 0) * quantity).toFixed(2)),
        potassium: parseFloat(((food.potassium || 0) * quantity).toFixed(2)),
        phosphorus: parseFloat(((food.phosphorus || 0) * quantity).toFixed(2)),
        protein: parseFloat(((food.protein || 0) * quantity).toFixed(2)),
        water: parseFloat(((food.water || 0) * quantity).toFixed(2)),
        urine: 0,
        kcal: parseFloat(((food.kcal || 0) * quantity).toFixed(2))
      };

      intakeHistory.push(intake);
      saveData();
      displayIntakeHistory();
      updateDashboard();

      foodSelect.selectedIndex = 0;
      quantityInput.value = '';
      mealTypeSelect.selectedIndex = 0;
      document.getElementById('foodSearch').value = '';
      populateFoodSelect();
    }

    function addWaterIntake(event) {
      event.preventDefault();
      const waterCupsInput = document.getElementById('waterCups');
      const cups = parseFloat(waterCupsInput.value);

      if (isNaN(cups) || cups <= 0) {
        showError('Ù„Ø·ÙØ§Ù‹ ØªØ¹Ø¯Ø§Ø¯ Ù„ÛŒÙˆØ§Ù†â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
        return;
      }

      const waterAmount = parseFloat((cups * 200).toFixed(2));

      let date;
      try {
        const persianDate = new persianDate();
        date = persianDate.format('dddd D MMMM YYYY');
      } catch (e) {
        console.error('Error with persianDate:', e);
        date = new Date().toLocaleDateString('fa-IR');
      }

      const timestamp = new Date().getTime();

      const intake = {
        type: 'water',
        date: date,
        timestamp: timestamp,
        mealType: '-',
        food: `Ø¢Ø¨ (${cups} Ù„ÛŒÙˆØ§Ù†)`,
        quantity: cups,
        unit: 'Ù„ÛŒÙˆØ§Ù†',
        sodium: 0,
        potassium: 0,
        phosphorus: 0,
        protein: 0,
        water: waterAmount,
        urine: 0,
        kcal: 0
      };

      intakeHistory.push(intake);
      saveData();
      displayIntakeHistory();
      updateDashboard();

      waterCupsInput.value = '';
    }

    function addUrineOutput(event) {
      event.preventDefault();
      const urineAmountInput = document.getElementById('urineAmount');
      const urineAmount = parseFloat(urineAmountInput.value);

      if (isNaN(urineAmount) || urineAmount <= 0) {
        showError('Ù„Ø·ÙØ§Ù‹ Ù…Ù‚Ø¯Ø§Ø± Ù…Ø¹ØªØ¨Ø±ÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ø±Ø§Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
        return;
      }

      let date;
      try {
        const persianDate = new persianDate();
        date = persianDate.format('dddd D MMMM YYYY');
      } catch (e) {
        console.error('Error with persianDate:', e);
        date = new Date().toLocaleDateString('fa-IR');
      }

      const timestamp = new Date().getTime();

      const intake = {
        type: 'urine',
        date: date,
        timestamp: timestamp,
        mealType: '-',
        food: 'Ø§Ø¯Ø±Ø§Ø±',
        quantity: parseFloat(urineAmount.toFixed(2)),
        unit: 'Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±',
        sodium: 0,
        potassium: 0,
        phosphorus: 0,
        protein: 0,
        water: 0,
        urine: parseFloat(urineAmount.toFixed(2)),
        kcal: 0
      };

      intakeHistory.push(intake);
      saveData();
      displayIntakeHistory();
      updateDashboard();

      urineAmountInput.value = '';
    }

    function calculateDailyUrineOutput() {
      const now = new Date().getTime();
      const oneDayInMs = 24 * 60 * 60 * 1000;
      const recentUrine = intakeHistory.filter(item => {
        return item.type === 'urine' && (now - item.timestamp) <= oneDayInMs;
      });
      return parseFloat(recentUrine.reduce((sum, item) => sum + (item.urine || 0), 0).toFixed(2));
    }

    function displayIntakeHistory() {
      const intakeTableBody = document.getElementById('intakeTableBody');
      intakeTableBody.innerHTML = '';
      intakeHistory.forEach((intake, index) => {
        const table = document.createElement('table');
        table.innerHTML = `
          <thead>
            <tr><th>Ù¾Ø§Ø±Ø§Ù…ØªØ±</th><th>Ù…Ù‚Ø¯Ø§Ø±</th></tr>
          </thead>
          <tbody>
            <tr><td>ØªØ§Ø±ÛŒØ®</td><td>${intake.date || '-'}</td></tr>
            <tr><td>Ù†ÙˆØ¹</td><td>${intake.type === 'food' ? intake.mealType : (intake.type === 'water' ? 'Ø¢Ø¨' : 'Ø§Ø¯Ø±Ø§Ø±')}</td></tr>
            <tr><td>ØºØ°Ø§/Ø¢Ø¨/Ø§Ø¯Ø±Ø§Ø±</td><td>${intake.food || '-'}</td></tr>
            <tr><td>Ù…Ù‚Ø¯Ø§Ø±</td><td>${intake.quantity || 0} ${intake.unit || ''}</td></tr>
            <tr><td>Ø³Ø¯ÛŒÙ… (Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…)</td><td>${(intake.sodium || 0).toFixed(2)}</td></tr>
            <tr><td>Ù¾ØªØ§Ø³ÛŒÙ… (Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…)</td><td>${(intake.potassium || 0).toFixed(2)}</td></tr>
            <tr><td>ÙØ³ÙØ± (Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…)</td><td>${(intake.phosphorus || 0).toFixed(2)}</td></tr>
            <tr><td>Ù¾Ø±ÙˆØªØ¦ÛŒÙ† (Ú¯Ø±Ù…)</td><td>${(intake.protein || 0).toFixed(2)}</td></tr>
            <tr><td>Ø¢Ø¨ (Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±)</td><td>${(intake.water || 0).toFixed(2)}</td></tr>
            <tr><td>Ø§Ø¯Ø±Ø§Ø± (Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±)</td><td>${(intake.urine || 0).toFixed(2)}</td></tr>
            <tr><td>Ú©Ø§Ù„Ø±ÛŒ (Ú©ÛŒÙ„ÙˆÚ©Ø§Ù„Ø±ÛŒ)</td><td>${(intake.kcal || 0).toFixed(2)}</td></tr>
            <tr><td>Ø¹Ù…Ù„ÛŒØ§Øª</td><td><button class="delete-button" onclick="deleteIntake(${index})"><i class="fas fa-trash"></i> Ø­Ø°Ù</button></td></tr>
          </tbody>
        `;
        intakeTableBody.appendChild(table);
      });
    }

    function deleteIntake(index) {
      intakeHistory.splice(index, 1);
      saveData();
      displayIntakeHistory();
      updateDashboard();
    }

    function deleteAllIntakes() {
      if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ù‡Ù…Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡ Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯ØŸ')) {
        intakeHistory = [];
        saveData();
        displayIntakeHistory();
        updateDashboard();
      }
    }

    function filterFoodDatabase() {
      const filter = document.getElementById('filterSelect').value;
      let filteredFoods = foodDB;
      if (filter === 'lowPotassium') {
        filteredFoods = foodDB.filter(food => food.restrictions && (food.restrictions.potassium === 'low' || !food.restrictions.potassium));
      } else if (filter === 'lowPhosphorus') {
        filteredFoods = foodDB.filter(food => food.restrictions && (food.restrictions.phosphorus === 'low' || !food.restrictions.phosphorus));
      } else if (filter === 'lowSodium') {
        filteredFoods = foodDB.filter(food => food.restrictions && (food.restrictions.sodium === 'low' || !food.restrictions.sodium));
      }
      displayFoodDatabase(filteredFoods);
    }

    function displayFoodDatabase(foods = foodDB) {
      const foodCategoriesDiv = document.getElementById('foodCategories');
      foodCategoriesDiv.innerHTML = '';
      const categories = [...new Set(foodDB.map(food => food.category))];
      categories.forEach(category => {
        const categoryFoods = foods.filter(food => food.category === category);
        if (categoryFoods.length > 0) {
          const button = document.createElement('button');
          button.className = 'accordion-button';
          button.innerHTML = `<i class="fas fa-chevron-down"></i> ${category}`;
          const content = document.createElement('div');
          content.className = 'accordion-content';
          const tableWrapper = document.createElement('div');
          tableWrapper.className = 'table-wrapper';
          const table = document.createElement('table');
          table.innerHTML = `
            <thead>
              <tr>
                <th>ØªØµÙˆÛŒØ±</th>
                <th>Ù†Ø§Ù…</th>
                <th>ÙˆØ§Ø­Ø¯</th>
                <th>Ø³Ø¯ÛŒÙ… (Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…)</th>
                <th>Ù¾ØªØ§Ø³ÛŒÙ… (Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…)</th>
                <th>ÙØ³ÙØ± (Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…)</th>
                <th>Ù¾Ø±ÙˆØªØ¦ÛŒÙ† (Ú¯Ø±Ù…)</th>
                <th>Ø¢Ø¨ (Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±)</th>
                <th>Ú©Ø§Ù„Ø±ÛŒ (Ú©ÛŒÙ„ÙˆÚ©Ø§Ù„Ø±ÛŒ)</th>
                <th>Ú©Ø±Ø¨ÙˆÙ‡ÛŒØ¯Ø±Ø§Øª (Ú¯Ø±Ù…)</th>
                <th>Ú†Ø±Ø¨ÛŒ (Ú¯Ø±Ù…)</th>
                <th>ØªØ£Ø«ÛŒØ± Ø¨Ø± Ù‚Ù†Ø¯ Ø®ÙˆÙ†</th>
                <th>Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§</th>
                <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
              </tr>
            </thead>
            <tbody>
              ${categoryFoods.map((food, index) => {
                const warnings = [];
                if (food.restrictions) {
                  if (food.restrictions.sodium === 'high') warnings.push('Ø³Ø¯ÛŒÙ… Ø¨Ø§Ù„Ø§');
                  if (food.restrictions.potassium === 'high') warnings.push('Ù¾ØªØ§Ø³ÛŒÙ… Ø¨Ø§Ù„Ø§');
                  if (food.restrictions.phosphorus === 'high') warnings.push('ÙØ³ÙØ± Ø¨Ø§Ù„Ø§');
                  if (food.restrictions.bloodSugar === 'high') warnings.push('Ù‚Ù†Ø¯ Ø®ÙˆÙ† Ø¨Ø§Ù„Ø§');
                }
                const warningText = warnings.length > 0 ? `âš ï¸ ${warnings.join('ØŒ ')}` : '';
                return `
                  <tr ${warnings.length > 0 ? 'style="background-color: #ffe6e6;"' : ''}>
                    <td><img src="${food.image || ''}" class="food-image" ${!food.image ? 'style="display:none;"' : ''}></td>
                    <td>${food.name}</td>
                    <td>${food.unit || '-'}</td>
                    <td>${(food.sodium || 0).toFixed(2)}</td>
                    <td>${(food.potassium || 0).toFixed(2)}</td>
                    <td>${(food.phosphorus || 0).toFixed(2)}</td>
                    <td>${(food.protein || 0).toFixed(2)}</td>
                    <td>${(food.water || 0).toFixed(2)}</td>
                    <td>${(food.kcal || 0).toFixed(2)}</td>
                    <td>${(food.carb || 0).toFixed(2)}</td>
                    <td>${(food.fat || 0).toFixed(2)}</td>
                    <td>${food.bloodSugarImpact || 'Ù†Ø§Ù…Ø´Ø®Øµ'}</td>
                    <td>${warningText}</td>
                    <td>
                      <button class="edit-button" onclick="editFood(${foodDB.indexOf(food)})"><i class="fas fa-edit"></i> ÙˆÛŒØ±Ø§ÛŒØ´</button>
                      <button class="delete-button" onclick="deleteFood(${foodDB.indexOf(food)})"><i class="fas fa-trash"></i> Ø­Ø°Ù</button>
                    </td>
                  </tr>
                `;
              }).join('')}
            </tbody>
          `;
          tableWrapper.appendChild(table);
          content.appendChild(tableWrapper);
          foodCategoriesDiv.appendChild(button);
          foodCategoriesDiv.appendChild(content);
        }
      });
      setupAccordion();
    }

    function showAddFoodForm() {
      const form = document.getElementById('addFoodForm');
      form.style.display = 'block';
      document.getElementById('foodIndex').value = '';
      document.getElementById('foodName').value = '';
      document.getElementById('foodCategory').value = 'Ú¯ÙˆØ´Øª';
      document.getElementById('foodImage').value = '';
      document.getElementById('foodSodium').value = '';
      document.getElementById('foodPotassium').value = '';
      document.getElementById('foodPhosphorus').value = '';
      document.getElementById('foodProtein').value = '';
      document.getElementById('foodWater').value = '';
      document.getElementById('foodKcal').value = '';
      document.getElementById('foodCarb').value = '';
      document.getElementById('foodFat').value = '';
    }

    function editFood(index) {
      const food = foodDB[index];
      document.getElementById('addFoodForm').style.display = 'block';
      document.getElementById('foodIndex').value = index;
      document.getElementById('foodName').value = food.name;
      document.getElementById('foodCategory').value = food.category;
      document.getElementById('foodSodium').value = food.sodium;
      document.getElementById('foodPotassium').value = food.potassium;
      document.getElementById('foodPhosphorus').value = food.phosphorus;
      document.getElementById('foodProtein').value = food.protein;
      document.getElementById('foodWater').value = food.water;
      document.getElementById('foodKcal').value = food.kcal;
      document.getElementById('foodCarb').value = food.carb;
      document.getElementById('foodFat').value = food.fat;
    }

    function addFood(event) {
      event.preventDefault();
      const index = document.getElementById('foodIndex').value;
      const sodium = parseFloat(document.getElementById('foodSodium').value);
      const potassium = parseFloat(document.getElementById('foodPotassium').value);
      const phosphorus = parseFloat(document.getElementById('foodPhosphorus').value);
      const protein = parseFloat(document.getElementById('foodProtein').value);
      const water = parseFloat(document.getElementById('foodWater').value);
      const kcal = parseFloat(document.getElementById('foodKcal').value);
      const carb = parseFloat(document.getElementById('foodCarb').value);
      const fat = parseFloat(document.getElementById('foodFat').value);
      const imageInput = document.getElementById('foodImage');
      const image = imageInput.files && imageInput.files[0] ? URL.createObjectURL(imageInput.files[0]) : '';

      if (isNaN(sodium) || isNaN(potassium) || isNaN(phosphorus) || isNaN(protein) || isNaN(water) || isNaN(kcal) || isNaN(carb) || isNaN(fat)) {
        showError('Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… Ù…Ù‚Ø§Ø¯ÛŒØ± Ø±Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
        return;
      }

      const newFood = {
        name: document.getElementById('foodName').value,
        category: document.getElementById('foodCategory').value,
        sodium: parseFloat(sodium.toFixed(2)),
        potassium: parseFloat(potassium.toFixed(2)),
        phosphorus: parseFloat(phosphorus.toFixed(2)),
        protein: parseFloat(protein.toFixed(2)),
        water: parseFloat(water.toFixed(2)),
        kcal: parseFloat(kcal.toFixed(2)),
        carb: parseFloat(carb.toFixed(2)),
        fat: parseFloat(fat.toFixed(2)),
        bloodSugarImpact: document.getElementById('foodName').value.includes('bloodsugar') ? 'medium' : 'low',
        restrictions: {},
        image: image,
        unit: document.getElementById('foodName').value.includes('Ù†Ø§Ù†') ? 'Û³Û° Ú¯Ø±Ù…' :
              document.getElementById('foodName').value.includes('Ú¯ÙˆØ´Øª') ? 'Û±Û°Û° Ú¯Ø±Ù…' :
              document.getElementById('foodName').value.includes('Ù…ÛŒÙˆÙ‡') ? 'Ø¹Ø¯Ø¯ Ù…ØªÙˆØ³Ø·' :
              document.getElementById('foodName').value.includes('Ø³Ø¨Ø²ÛŒ') ? 'ÙÙ†Ø¬Ø§Ù†' : 'ÙˆØ§Ø­Ø¯'
      };

      if (index === '') {
        foodDB.push(newFood);
      } else {
        foodDB[index] = newFood;
      }
      saveData();
      displayFoodDatabase();
      populateFoodSelect();
      document.getElementById('addFoodForm').style.display = 'none';
      document.getElementById('addFoodForm').reset();
    }

    function deleteFood(index) {
      foodDB.splice(index, 1);
      saveData();
      displayFoodDatabase();
      populateFoodSelect();
    }

    function displayLimits() {
      document.getElementById('sodiumLimitDisplayMg').textContent = limits.sodium.toFixed(2);
      document.getElementById('potassiumLimitDisplayMg').textContent = limits.potassium.toFixed(2);
      document.getElementById('phosphorusLimitDisplayMg').textContent = limits.phosphorus.toFixed(2);
      document.getElementById('proteinLimitDisplayMg').textContent = limits.protein.toFixed(2);
      document.getElementById('waterLimitDisplayMl').textContent = limits.water.toFixed(2);

      document.getElementById('sodiumLimit').value = limits.sodium.toFixed(2);
      document.getElementById('potassiumLimit').value = limits.potassium.toFixed(2);
      document.getElementById('phosphorusLimit').value = limits.phosphorus.toFixed(2);
      document.getElementById('proteinLimit').value = limits.protein.toFixed(2);
      document.getElementById('waterLimit').value = limits.water.toFixed(2);
    }

    function updateDashboard() {
      const now = new Date().getTime();
      const oneDayInMs = 24 * 60 * 60 * 1000;
      const recentIntakes = intakeHistory.filter(item => {
        return (now - item.timestamp) <= oneDayInMs;
      });

      const totals = recentIntakes.reduce((acc, item) => {
        acc.sodium += item.sodium || 0;
        acc.potassium += item.potassium || 0;
        acc.phosphorus += item.phosphorus || 0;
        acc.protein += item.protein || 0;
        acc.water += item.water || 0;
        acc.kcal += item.kcal || 0;
        return acc;
      }, { sodium: 0, potassium: 0, phosphorus: 0, protein: 0, water: 0, kcal: 0 });

      document.getElementById('totalSodiumMg').textContent = totals.sodium.toFixed(2);
      document.getElementById('totalPotassiumMg').textContent = totals.potassium.toFixed(2);
      document.getElementById('totalPhosphorusMg').textContent = totals.phosphorus.toFixed(2);
      document.getElementById('totalProteinMg').textContent = totals.protein.toFixed(2);
      document.getElementById('totalWaterMl').textContent = totals.water.toFixed(2);
      document.getElementById('totalKcal').textContent = totals.kcal.toFixed(2);

      const dailyUrine = calculateDailyUrineOutput();
      document.getElementById('dailyUrineOutput').textContent = dailyUrine.toFixed(2);

      const warningsDiv = document.getElementById('warnings');
      warningsDiv.innerHTML = '';
      if (dailyUrine < userData.minimumUrineOutput) {
        const warning = document.createElement('div');
        warning.className = 'warning';
        warning.textContent = `âš ï¸ Ù…Ù‚Ø¯Ø§Ø± Ø§Ø¯Ø±Ø§Ø± Ø±ÙˆØ²Ø§Ù†Ù‡ (${dailyUrine.toFixed(2)} Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±) Ú©Ù…ØªØ± Ø§Ø² Ø­Ø¯Ø§Ù‚Ù„ Ù…Ø¬Ø§Ø² (${userData.minimumUrineOutput.toFixed(2)} Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±) Ø§Ø³Øª.`;
        warningsDiv.appendChild(warning);
      }

      updateChart('sodiumChart', 'Ø³Ø¯ÛŒÙ…', totals.sodium, limits.sodium, 'Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…');
      updateChart('potassiumChart', 'Ù¾ØªØ§Ø³ÛŒÙ…', totals.potassium, limits.potassium, 'Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…');
      updateChart('phosphorusChart', 'ÙØ³ÙØ±', totals.phosphorus, limits.phosphorus, 'Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…');
      updateChart('proteinChart', 'Ù¾Ø±ÙˆØªØ¦ÛŒÙ†', totals.protein, limits.protein, 'Ú¯Ø±Ù…');
      updateChart('waterChart', 'Ø¢Ø¨', totals.water, limits.water, 'Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±');

      const stickers = {
        sodium: document.getElementById('sodiumSticker'),
        potassium: document.getElementById('potassiumSticker'),
        phosphorus: document.getElementById('phosphorusSticker'),
        protein: document.getElementById('proteinSticker'),
        water: document.getElementById('waterSticker')
      };

      Object.keys(stickers).forEach(key => {
        const value = totals[key];
        const limit = limits[key];
        stickers[key].textContent = value > limit ? 'ğŸ˜Ÿ' : (value > limit * 0.75 ? 'ğŸ˜•' : 'ğŸ˜Š');
      });
    }

    function updateChart(chartId, label, consumed, limit, unit) {
      const ctx = document.getElementById(chartId).getContext('2d');
      const percentage = Math.min((consumed / limit) * 100, 100);
      const remaining = Math.max(limit - consumed, 0);

      if (charts[chartId]) {
        charts[chartId].destroy();
      }

      charts[chartId] = new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: [`${label} Ù…ØµØ±Ùâ€ŒØ´Ø¯Ù‡ (${unit})`, `${label} Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡ (${unit})`],
          datasets: [{
            data: [consumed, remaining],
            backgroundColor: ['#42a5f5', '#e0e0e0'],
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'bottom',
              labels: {
                font: {
                  size: parseInt(getComputedStyle(document.documentElement).fontSize)
                }
              }
            },
            tooltip: {
              callbacks: {
                label: function(context) {
                  const value = context.raw;
                  return `${context.label}: ${value.toFixed(2)} ${context.label.includes('Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…') ? 'Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…' : context.label.includes('Ú¯Ø±Ù…') ? 'Ú¯Ø±Ù…' : 'Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ±'}`;
                }
              }
            }
          }
        }
      });
    }

    function sendSMS() {
      const now = new Date().getTime();
      const oneDayInMs = 24 * 60 * 60 * 1000;
      const recentIntakes = intakeHistory.filter(item => {
        return (now - item.timestamp) <= oneDayInMs;
      });

      const totals = recentIntakes.reduce((acc, item) => {
        acc.sodium += item.sodium || 0;
        acc.potassium += item.potassium || 0;
        acc.phosphorus += item.phosphorus || 0;
        acc.protein += item.protein || 0;
        acc.water += item.water || 0;
        acc.kcal += item.kcal || 0;
        return acc;
      }, { sodium: 0, potassium: 0, phosphorus: 0, protein: 0, water: 0, kcal: 0 });

      const dailyUrine = calculateDailyUrineOutput();
      const message = `Ú¯Ø²Ø§Ø±Ø´ Ø±ÙˆØ²Ø§Ù†Ù‡ Ø¨ÛŒÙ…Ø§Ø± ${deviceId}:\n` +
                      `Ø³Ø¯ÛŒÙ…: ${totals.sodium.toFixed(2)} Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù… (Ø­Ø¯: ${limits.sodium.toFixed(2)})\n` +
                      `Ù¾ØªØ§Ø³ÛŒÙ…: ${totals.potassium.toFixed(2)} Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù… (Ø­Ø¯: ${limits.potassium.toFixed(2)})\n` +
                      `ÙØ³ÙØ±: ${totals.phosphorus.toFixed(2)} Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù… (Ø­Ø¯: ${limits.phosphorus.toFixed(2)})\n` +
                      `Ù¾Ø±ÙˆØªØ¦ÛŒÙ†: ${totals.protein.toFixed(2)} Ú¯Ø±Ù… (Ø­Ø¯: ${limits.protein.toFixed(2)})\n` +
                      `Ø¢Ø¨: ${totals.water.toFixed(2)} Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ± (Ø­Ø¯: ${limits.water.toFixed(2)})\n` +
                      `Ø§Ø¯Ø±Ø§Ø± Û²Û´ Ø³Ø§Ø¹ØªÙ‡: ${dailyUrine.toFixed(2)} Ù…ÛŒÙ„ÛŒâ€ŒÙ„ÛŒØªØ± (Ø­Ø¯Ø§Ù‚Ù„: ${userData.minimumUrineOutput.toFixed(2)})\n` +
                      `Ú©Ø§Ù„Ø±ÛŒ: ${totals.kcal.toFixed(2)} Ú©ÛŒÙ„ÙˆÚ©Ø§Ù„Ø±ÛŒ`;

      const smsURL = `sms:+989123456789?body=${encodeURIComponent(message)}`;
      window.location.href = smsURL;

      showError('Ù¾ÛŒØ§Ù…Ú© Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø±Ø§ÛŒ ØªÛŒÙ… Ø¯Ø±Ù…Ø§Ù†ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯.');
    }

    // Ø«Ø¨Øª Ø³Ø±ÙˆÛŒØ³â€ŒÙˆØ±Ú©Ø±
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js').then(registration => {
          console.log('Service Worker registered with scope:', registration.scope);
        }).catch(error => {
          console.error('Service Worker registration failed:', error);
        });
      });
    }
  </script> 
  
</body></html>